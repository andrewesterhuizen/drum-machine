(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){e.exports=a(30)},,,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),s=a.n(c),o=(a(17),a(6)),i=a(1),l=a(2),u=a(4),m=a(3),p=a(5),d=(a(19),a(7)),f=a.n(d),b=(a(21),function e(t,a){Object(i.a)(this,e),this.name=t,this.sample=a,this.sequence=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),h=(a(22),a(24),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.drum,a=e.toggleStep,n=e.step;return r.a.createElement("button",{className:1===t.sequence[n]?"step-button step-button--active":"step-button",onClick:function(){a(t.id,n)}})}}]),t}(n.Component)),g=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){for(var e=this.props,t=e.drum,a=e.toggleStep,n=e.randomise,c=[],s=0;s<16;s++)c.push(r.a.createElement(h,{drum:t,step:s,toggleStep:a,key:"".concat(t.name,"-step-").concat(s)}));return r.a.createElement("div",{className:"step-row"},r.a.createElement("span",{className:t.sample.isPlaying()?"step-row__title step-row__title--playing":"step-row__title"},"".concat(t.control,": ").concat(t.name)),r.a.createElement("div",{className:"step-row__steps"},c),r.a.createElement("button",{className:"step-row__button",onClick:function(){n(t.id)}},r.a.createElement("i",{className:"fa fa-random"})))}}]),t}(n.Component),v=(a(26),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){for(var e=this.props.beat,t=[],a=0;a<16;a++)t.push(r.a.createElement("span",{className:a===e?"step-indicator step-indicator--active":"step-indicator",key:a},a+1));return r.a.createElement("div",{className:"step-indicator-row"},r.a.createElement("span",{className:"step-row__title"}),r.a.createElement("div",{className:"step-row__steps"},t),r.a.createElement("button",{className:"step-row__button"},r.a.createElement("i",{className:"fa fa-random hide"})))}}]),t}(n.Component)),E=(a(28),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.togglePause,a=e.increaseBPM,n=e.decreaseBPM,c=(e.randomiseAll,e.resetAll),s=e.toggleRecording,o=e.recording,i=e.paused;return r.a.createElement("div",{className:"controls"},r.a.createElement("button",{className:o?"controls__button controls__button--recording":"controls__button",onClick:s},r.a.createElement("i",{className:"fa fa-circle"})),i?r.a.createElement("button",{className:"controls__button",onClick:t},r.a.createElement("i",{className:i?"fa fa-play":"fa fa-pause"})):r.a.createElement("button",{className:"controls__button",onClick:t},r.a.createElement("i",{className:"fa fa-pause"})),r.a.createElement("div",{className:"controls__tempo"},r.a.createElement("button",{className:"controls__button",onClick:n},r.a.createElement("i",{className:"fa fa-minus"})),r.a.createElement("span",{className:"controls__bpm"},this.props.bpm),r.a.createElement("button",{className:"controls__button",onClick:a},r.a.createElement("i",{className:"fa fa-plus"}))),r.a.createElement("button",{className:"controls__button",onClick:c},r.a.createElement("i",{className:"fa fa-redo"})))}}]),t}(n.Component)),w=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.drums,n=t.beat,c=t.paused,s=t.bpm,o=t.togglePause,i=t.increaseBPM,l=t.decreaseBPM,u=t.randomise,m=t.resetAll,p=t.toggleRecording,d=t.recording;return r.a.createElement("div",{className:"drum-machine"},a.map(function(t){return r.a.createElement(g,{drum:t,key:t.name,toggleStep:e.props.toggleStep,randomise:u})}),r.a.createElement(v,{beat:n}),r.a.createElement(E,{bpm:s,togglePause:o,paused:c,increaseBPM:i,decreaseBPM:l,resetAll:m,toggleRecording:p,recording:d}))}}]),t}(n.Component),k=a(11),y=function(e,t,a,n){var r,c,s=Math.sin(a+n);return(s-(r=-1))*(e-t-(c=0))/(1-r)+c+t/2},j=function(){var e=Object(n.useState)(0),t=Object(k.a)(e,2),a=t[0],c=t[1],s=!0,o=function e(){s&&(c(a+.07),requestAnimationFrame(e))};return Object(n.useEffect)(function(){return requestAnimationFrame(o),function(){s=!1}}),r.a.createElement("svg",{width:100,height:60},r.a.createElement("circle",{cx:"20%",cy:y(60,12,a,0),r:4,fill:"#fff"}),r.a.createElement("circle",{cx:"35%",cy:y(60,12,a,1),r:4,fill:"#fff"}),r.a.createElement("circle",{cx:"50%",cy:y(60,12,a,2),r:4,fill:"#fff"}),r.a.createElement("circle",{cx:"65%",cy:y(60,12,a,3),r:4,fill:"#fff"}),r.a.createElement("circle",{cx:"80%",cy:y(60,12,a,4),r:4,fill:"#fff"}))},O=["bd1","sd1","lt","mt","ht","rim","hcp","hhc","hho","ride"],S=["Q","W","E","R","T","Y","U","I","O","P"],_=new Promise(function(e){var t,a=[];t=new f.a(function(n){n.preload=function(){n.soundFormats("wav"),O.forEach(function(e,t){n.loadSound("./samples/".concat(e,".wav"),function(t){return a.push(new b(e,t))})})},n.setup=function(){n.frameRate(50),n.noCanvas(),e({machine:t,drums:a})}})}),N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).toggleStep=function(t,a){var n=Object(o.a)(e.state.drums),r=n[t];0===r.sequence[a]?r.sequence[a]=1:r.sequence[a]=0,e.setState({drums:n})},e.togglePause=function(){e.setState({paused:!e.state.paused})},e.increaseBPM=function(){e.setState({bpm:e.state.bpm+1})},e.decreaseBPM=function(){e.setState({bpm:e.state.bpm-1})},e.getRandomSequence=function(){for(var e=[],t=0;t<16;t++)e[t]=Math.random()>.3?0:1;return e},e.randomise=function(t){var a=Object(o.a)(e.state.drums);a[t].sequence=e.getRandomSequence(),e.setState({drums:a})},e.resetAll=function(){var t=Object(o.a)(e.state.drums);t.forEach(function(e){e.sequence.fill(0)}),e.setState({drums:t})},e.toggleRecording=function(){e.setState({recording:!e.state.recording})},e.recordStep=function(t){if(!e.state.paused&&e.state.recording){var a=Object(o.a)(e.state.drums);a[t].sequence[e.state.beat]=1,e.setState({drums:a})}},e.state={samplesLoaded:!1,beat:0,bpm:120,paused:!0,recording:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"checkStep",value:function(e){this.state.drums.forEach(function(t){1===t.sequence[e]&&t.sample.play()})}},{key:"componentWillMount",value:function(){var e=this;this.state.samplesLoaded||_.then(function(t){var a=t.machine,n=t.drums;n.map(function(e,t){return e.id=t,e.control=S[t],e}),e.setState({drums:n,samplesLoaded:!0});var r,c,s,o=Date.now();a.draw=function(){s=1e3/e.state.bpm*60/4,r=Date.now(),(c=r-o)>s&&(o=r-c%s,e.state.paused||(e.setState({beat:e.state.beat+1}),e.state.beat>15&&e.setState({beat:0}),e.checkStep(e.state.beat)))}}),document.addEventListener("keydown",function(t){var a=e.state.drums;switch(t.preventDefault(),t.key){case" ":e.togglePause();break;case"q":a[0].sample.play(),e.recordStep(0);break;case"w":a[1].sample.play(),e.recordStep(1);break;case"e":a[2].sample.play(),e.recordStep(2);break;case"r":a[3].sample.play(),e.recordStep(3);break;case"t":a[4].sample.play(),e.recordStep(4);break;case"y":a[5].sample.play(),e.recordStep(5);break;case"u":a[6].sample.play(),e.recordStep(6);break;case"i":a[7].sample.play(),e.recordStep(7);break;case"o":a[8].sample.play(),e.recordStep(8);break;case"p":a[9].sample.play(),e.recordStep(9)}})}},{key:"render",value:function(){return this.state.samplesLoaded?r.a.createElement(w,{drums:this.state.drums,bpm:this.state.bpm,paused:this.state.paused,increaseBPM:this.increaseBPM,decreaseBPM:this.decreaseBPM,togglePause:this.togglePause,randomise:this.randomise,toggleRecording:this.toggleRecording,recording:this.state.recording,resetAll:this.resetAll,selectDrum:this.selectDrum,toggleStep:this.toggleStep,beat:this.state.beat}):r.a.createElement(j,null)}}]),t}(n.Component),P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(N,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");P?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):C(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):C(e)})}}()}],[[12,2,1]]]);
//# sourceMappingURL=main.001b8f31.chunk.js.map